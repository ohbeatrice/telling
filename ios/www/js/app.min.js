var telling;telling=angular.module("telling",["ngRoute","auth0","angular-jwt","angular-storage"]).run(function(e,t,n,o){e.$on("$locationChangeStart",function(){if(!t.isAuthenticated){var e=n.get("token");e&&(o.isTokenExpired(e)||t.authenticate(n.get("profile"),e))}})}).config(function(e,t){t.when("/",{templateUrl:"html/home.html",controller:"HomeCtrl"}).when("/welcome",{templateUrl:"html/welcome.html",controller:"WelcomeCtrl"}).when("/profile",{templateUrl:"html/profile.html",controller:"ProfileCtrl"}).when("/pyramid",{templateUrl:"html/pyramid.html",controller:"PyramidCtrl"}).when("/reportingtools",{templateUrl:"html/reportingtools.html",controller:"ReportingCtrl"}).when("/audiorecord",{templateUrl:"html/audiorecord.html",controller:"AudiorecCtrl"}),e.init({domain:"tellingapp.auth0.com",clientID:"fjmIE1wLmsV5YGII4nRMFdoZfvCr8txN",loginUrl:"/"})}).run(function(e){e.hookEvents()}),telling.controller("MainCtrl",["store","$scope","$location","$rootScope","auth",function(e,t,n,o){o.profile=e.get("profile"),o.token=e.get("token"),null==o.token&&(o.login=!1),console.log(o.profile,o.token),t.logIn=function(){window.location="http://localhost:8100"},t.logOut=function(){e.remove("token"),e.remove("profile"),n.url(""),window.location="https://tellingapp.auth0.com/logout?returnTo=http://localhost:8100"}}]),telling.controller("HomeCtrl",["auth","$location","store","$scope","$rootScope",function(e,t,n,o,r){r.profile={name:"Guest User"};var l=new Auth0Lock("fjmIE1wLmsV5YGII4nRMFdoZfvCr8txN","tellingapp.auth0.com");l.show(function(e,r,l){return e?void console.log("There was ane error :/",e):(t.path("/welcome"),n.set("profile",r),n.set("token",l),o.userName=r.name||"Guest User",o.userImg=r.picture,void o.$apply())})}]),telling.controller("WelcomeCtrl",["store","$scope",function(){}]),telling.controller("ProfileCtrl",["store","$scope",function(e,t){t.userStories=[{headline:"This is a great Headline",lead:"The begining of the story goes like this"},{headline:"This Headline is Less Good",lead:"The middle of the story is exciting here"}]}]),module.controller("MyCtrl",function(e,t){var n="/src/audio.mp3",o=t.newMedia(n).then(function(){},function(){});o.play(options),o.play(),o.pause(),o.stop(),o.release(),o.seekTo(5e3),o.setVolume(.5),o.startRecord(),o.stopRecord()}),telling.controller("PyramidCtrl",function(e,t,n){e.events=[],e.story="",e.submit=!1,e.result="",e.hint="",e.test=["ev1","ev2","ev3"],e.answer=[],t.get("http://localhost:3000").success(function(t){e.story=n.trustAsHtml(t[0].text),e.result=t[0].result,e.hint=t[0].hint,e.getEvents(t[0].id)}).error(function(e){console.log("Error: "+e)}),e.getEvents=function(n){t.get("http://localhost:3000/events?id="+n).success(function(t){e.events=t,e.randomize()}).error(function(e){console.log("Error: "+e)})},e.randomize=function(){e.ev1=e.events[Math.floor(Math.random()*e.events.length)],e.ev1.newIndex=0;var t=e.events.indexOf(e.ev1);e.events.splice(t,1),e.ev2=e.events[Math.floor(Math.random()*e.events.length)],e.ev2.newIndex=1;var n=e.events.indexOf(e.ev2);e.events.splice(n,1),e.ev3=e.events[0],e.ev3.newIndex=2,e.answer=[e.ev1,e.ev2,e.ev3],e.answer.sort(function(e,t){return e.val>t.val?1:e.val<t.val?-1:0}),e.answer=["ev"+(e.answer[0].newIndex+1),"ev"+(e.answer[1].newIndex+1),"ev"+(e.answer[2].newIndex+1)]},e.go=function(){for(var t=0;2>t;t++)e.message=e.test[t]!=e.answer[t]?e.hint:e.result,e.submit=!0};{var o=document.getElementById("items");Sortable.create(o,{onUpdate:function(t){e.test=[t.target.children[0].id,t.target.children[1].id,t.target.children[2].id],"ev1"==t.item.id&&(e.ev1.newIndex=t.newIndex),"ev2"==t.item.id&&(e.ev2.newIndex=t.newIndex),"ev3"==t.item.id&&(e.ev3.newIndex=t.newIndex)}})}});